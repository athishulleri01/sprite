let enableDPVersion=$("body").attr("data-dbversions-enabled")=="true";let requireArray;if(enableDPVersion){requireArray=["optional!dpVersionsNextgen","optional!dpVersioningExperience","jqueryNoConflict"]}else{requireArray=["jqueryNoConflict"]}require(requireArray,(function(){var self={app_ready:false,components:{},sharedRoot:"",staticRoot:"",preferredBreakpointOrder:["xs","sm","md","lg","xl"],preferredBreakpointOrderPM:["xs","sm","md","lg","xl"],compiledComponents:[],extensions:!($("body").data("extensionless")||false),isAuthorMode:$("body").hasClass("authorMode"),stylesOutForRequest:[],logicOutForRequest:[],compiledTemplates:[],templatesOutForRequest:[],cssToUUIDMap:new Map,jsToUUIDMap:new Map,dateFormat:$("body").data("date-format"),genericLocale:$("body").data("genericlocale"),useDPVersions:$("body").attr("data-dbversions-enabled")=="true",awsEndPoint:$("body").data("awsendpoint"),awsSiteID:$("body").data("site"),dpLoadCounter:0,dpLoaded:false,lazySizesInit:false,breakpoinChanged:false,global:{querystringObject:{},isAEM:function(){return $("body").hasClass("tccc-page")},querystringToObject:function(querystring){var result={};var pairs=querystring.split("?")[1].split("&");if(pairs){pairs.forEach((function(pair){pair=pair.split("=");var name=decodeURI(pair[0]);var value=decodeURI(pair[1]);if(name.length){if(result[name]!==undefined){if(!result[name].push){result[name]=[result[name]]}result[name].push(value||"")}else{result[name]=value||""}}}))}return result},objectToQuerystring:function(querystringObject){var querystring;var shallowEncoded=$.param(querystringObject,false);var shallowDecoded=decodeURIComponent(shallowEncoded);querystring=shallowDecoded;querystring=self.util.replaceG(querystring,"[","");querystring=self.util.replaceG(querystring,"]","");return querystring},getLanguage:function(){return $("body").data("language")},getCountry:function(){return $("body").data("country")},getSite:function(){return $("body").data("site")},getLocale:function(){return $("body").data("locale")},getDataLayer:function(){return $("body").data("datalayer-disabled")},guid:function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()},getVersionFile:function(dpUrl){if(!dpUrl){return undefined}if(self.useDPVersions===undefined||self.useDPVersions===false){return dpUrl}if(!dpUrl.startsWith("http")){return dpUrl}var url=new URL(dpUrl);var versionFile=window.dpVersions.get(url.pathname);if(versionFile===undefined){return dpUrl}return url.protocol+"//"+url.hostname+url.port+"/"+versionFile},increaseLoadCounter:function(){++self.dpLoadCounter},decreaseLoadCounter:function(){--self.dpLoadCounter;if(self.dpLoadCounter===0){self.dpLoaded=true;self.global.nextgenDomReady();console.log("NEXTGEN_DOM_READY - triggered");$(window).trigger("NEXTGEN_DOM_READY")}},resumeLazySizes:function(){lazySizesConfig.loadMode=2;lazySizes.init(true)},isMobileDevice:function(){return $("html").hasClass("xs")||$("html").hasClass("sm")},setupAspectRatio:function(){var mobileDevice=self.global.isMobileDevice();$(".ratio-box").each((function(idx,e){var elem=$(e);var mobileAspectRatio=elem.data("mobile-aspect-ratio");if(mobileDevice&&mobileAspectRatio!==undefined){elem.css("padding-bottom",mobileAspectRatio)}else{elem.css("padding-bottom",elem.data("desktop-aspect-ratio"))}}))},nextgenDomReady:function(){if(!self.dpLoaded||!self.breakpoinChanged||self.lazySizesInit){return}self.lazySizesInit=true;self.global.setupAspectRatio();self.global.resumeLazySizes()},i18n:function(str){var currentPos=0;var i18nStr="";while(true){var idx=str.indexOf("<%",currentPos);if(idx==-1){i18nStr+=str.slice(currentPos,str.length);return i18nStr}var keyEndIdx=str.indexOf("%>",idx);if(keyEndIdx==-1){return str}i18nStr+=str.slice(currentPos,idx);var key=str.slice(idx+2,keyEndIdx);key=key.trim();if(self.global.isAEM()){var Granite=window.Granite;if(Granite&&Granite.I18n){i18nStr+=Granite.I18n.getVar(key)}else{i18nStr+=key}}else{i18nStr+=key}currentPos=keyEndIdx+2}},getCSS:function(url){if(url){stylePromise=$.get(url);$.when(stylePromise).done((function(styleData){tccc.global.addCSStoPage(styleData)}));return stylePromise}else{return false}},renderTemplate:function(guid,keepExistingContent){var $template=$("script#template-"+guid);var componentName=self.util.findComponentNameByGuid(guid);var $container=$(".tccc-cmp[data-instance-id='"+guid+"']");var dataSource=self.components[componentName][guid];self.global.hb($template,dataSource,$container,keepExistingContent)},hb:function($template,dataSource,$container,keepExistingContent){var hasNested=false;var slotHTML="";if($template[0]&&($template[0].innerHTML&&$template[0].innerHTML.indexOf("{{{slotHTML}}}")!==-1)){hasNested=true;var htmlSlots=$container.children();if(htmlSlots.length>0){slotHTML=document.createDocumentFragment();htmlSlots.each((function(i,child){if($(child).hasClass("aem-Grid")||$(child).is("cq")){slotHTML.appendChild(child)}}));$template[0].innerHTML=$template[0].innerHTML.replace("{{{slotHTML}}}",'<div id="tccc-nested-placeholder"></div>')}}var templatePath=$container[0].getAttribute("data-template-url");if(!self.compiledTemplates[templatePath]){self.compiledTemplates[templatePath]=Handlebars.compile($template)}var compiledTemplate=self.compiledTemplates[templatePath];var html=compiledTemplate(dataSource);html=self.global.i18n(html);if(!keepExistingContent){$container.empty()}$container.append(html);var $containerGuid=$container.attr("data-instance-id");if(hasNested===true){var nestedPlaceholder=$container.find("#tccc-nested-placeholder");if(nestedPlaceholder){$(slotHTML).insertBefore(nestedPlaceholder);nestedPlaceholder.remove();$container.find(".tccc-cmp").each((function(){$(this).attr("parent-instance-id",$containerGuid);self.global.processComponent(this)}))}}self.compiledComponents.push($containerGuid);$(window).trigger("TEMPLATE_RENDERED",[$container,self.compiledComponents])},getSharedRoot:function(){return $("body").data("shared-root")||""},getStaticRoot:function(){return $("body").data("static-root")||"//static.coke.com"},processModelData:function($component,model){var addAttributes=model.additionalAttributes;if(addAttributes){addAttributes.forEach((function(cur){var aName=cur.attributeName;var aVal=cur.attributeValue;$component.attr(aName,aVal)}))}var nodeText=model.nodeText;if(nodeText){$component.text(nodeText)}},processComponentData:function(component,$parent){var guid=self.global.guid();var componentId=component.componentId,componentName=component.componentName,componentElement=component.componentElement,cssClassNames=component.cssClassNames;var modelUrl=component.modelUrl,styleUrl=component.styleUrl,templateUrl=component.templateUrl,logicUrl=component.logicUrl;var node=document.createElement(componentElement);if(componentId){node.setAttribute("id",componentId)}$parent.append(node);var $current=$("#"+componentId).addClass(cssClassNames).addClass("tccc-cmp");var componentData=component.data;if(componentData){$current.data("model",JSON.stringify(componentData))}self.global.processModelData($current,component);$current.attr("data-instance-id",guid);if(!self.components[componentName]){self.components[componentName]={}}var curComponent=self.components[componentName];curComponent[guid]=self.global.generateNewComponent(guid);self.components[componentName]=curComponent;if(modelUrl){$current.attr("data-model-url",modelUrl)}if(styleUrl){$current.attr("data-style-url",styleUrl)}if(templateUrl){$current.attr("data-template-url",templateUrl)}if(logicUrl){$current.attr("data-logic-url",logicUrl)}var items=component["components"];if(items){items.forEach((function(subC){self.global.processComponentData(subC,$current)}))}self.global.processComponent($current)},addCSStoPage:function(styleData,$component){var pageThemes=document.getElementsByClassName("page-theme");var css=styleData;var head=document.head||document.getElementsByTagName("head")[0];var style=document.createElement("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}if(pageThemes.length>0){head.insertBefore(style,pageThemes[0])}else{head.appendChild(style)}if($component){$(window).trigger({type:"STYLE_READY",component:$component[0]})}},addHbsToPage:function(guid,templateData){var body=document.body||document.getElementsByTagName("body")[0];var script=document.createElement("script");script.type="text/x-handlebars-template";script.id="template-"+guid;script.appendChild(document.createTextNode(templateData));body.appendChild(script);var $template=$("#template-"+guid);return $template},initComponent:function($component){$component.find(".responsive-background-image").each((function(){self.global.updateBackgroundImage($(this))}));$component.find("img.responsive-image").each((function(){self.global.updateImageSrc($(this))}));$component.find(".custom-margin-padding").each((function(){self.global.updateMarginPadding($(this))}))},updateModel:function(modelData,$component){modelData=self.global.addPBToModel(modelData,$component);modelData=self.global.addExtensionFlagToModel(modelData);modelData=self.global.addModeToModel(modelData);return modelData},addModeToModel:function(modelData){modelData.authorMode=self.isAuthorMode;return modelData},addExtensionFlagToModel:function(modelData){modelData.extensions=self.extensions;return modelData},addPBToModel:function(modelData,$component){var $parent=$component.parent();modelData.paintbrushOptions=$parent.attr("class").split(" ");return modelData},processComponent:function($component){var shouldRenderComponentPromise=self.global.getRenderComponentPromise($component);$.when(shouldRenderComponentPromise).done((function(shouldRenderComponent){if(!shouldRenderComponent){return}var modelUrl=$component.data("model-url");var templateUrl=$component.data("template-url");var styleUrl=$component.data("style-url");var logicUrl=$component.data("logic-url");var processType=$component.data("process-type");templateUrl=self.global.getVersionFile(templateUrl);styleUrl=self.global.getVersionFile(styleUrl);logicUrl=self.global.getVersionFile(logicUrl);var logicSettings={url:logicUrl,dataType:"text"};var modelPromise,templatePromise,stylePromise,logicPromise,externalDataPromise;var externalDataComponent=false;var updateQuery=false;var componentName=$component.data("component-name");var isServerHbsEnabled=$component.data("serverHbsEnabled");var request;var guid=self.global.guid();var domainName=window.location.hostname;var metaDomainName=document.querySelector('meta[property="og:url"]');if(metaDomainName===null||metaDomainName===undefined){metaDomainName=domainName}else{metaDomainName=metaDomainName.content;if(metaDomainName&&/^(?:[a-z]+:)?\/\//i.test(metaDomainName)){metaDomainName=new URL(metaDomainName).hostname}else{metaDomainName=domainName}}if(modelUrl&&domainName===metaDomainName){modelPromise=$.get(modelUrl)}if(templateUrl&&!isServerHbsEnabled){self.global.increaseLoadCounter();request=function(){for(var i=0;i<self.templatesOutForRequest.length;i++){if(self.templatesOutForRequest[i]["templateUrl"]===templateUrl){return self.templatesOutForRequest[i]["templatePromise"]}}return-1};if(request()===-1){templatePromise=$.get(templateUrl);self.templatesOutForRequest.push({templateUrl:templateUrl,templatePromise:templatePromise})}else{templatePromise=request()}}if(styleUrl){self.global.increaseLoadCounter();request=function(){for(var i=0;i<self.stylesOutForRequest.length;i++){if(self.stylesOutForRequest[i]["styleUrl"]===styleUrl){return self.stylesOutForRequest[i]["stylePromise"]}}return-1};if(request()===-1){stylePromise=$.get(styleUrl);self.stylesOutForRequest.push({styleUrl:styleUrl,stylePromise:stylePromise})}else{stylePromise=request()}}else{$(window).trigger({type:"STYLE_READY",component:$component[0]})}if(logicUrl){self.global.increaseLoadCounter();request=function(){for(var i=0;i<self.logicOutForRequest.length;i++){if(self.logicOutForRequest[i]["logicUrl"]===logicUrl){return self.logicOutForRequest[i]["logicPromise"]}}return-1};if(request()===-1){logicPromise=$.get(logicSettings);self.logicOutForRequest.push({logicUrl:logicUrl,logicPromise:logicPromise})}else{logicPromise=request()}}if($component.hasClass("tccc-cmp-externalData")&&processType!="promoData"){externalDataComponent=true;var pinSearch=false;requirejs(["smartlistHandler","AWS"],(function(){externalDataPromise=tccc.global.smartlistHandler.processExternalDataQuery($component.data("model"),processType,$component,updateQuery,pinSearch);externalDataPromise.then((function(){processComponents()}))}))}else{processComponents()}function processComponents(){if(stylePromise){$.when(stylePromise).done((function(styleData){try{let dependOnId=false;if(!self.cssToUUIDMap.has(this.url)){dependOnId=styleData.indexOf("{{id}}")>=0}styleData=styleData.replace(/{{id}}/g,guid);styleData=styleData.replace(/{{SHARED_ROOT}}/g,self.global.sharedRoot);styleData=styleData.replace(/{{STATIC_ROOT}}/g,self.global.staticRoot);if(self.cssToUUIDMap.has(this.url)){if(self.cssToUUIDMap.get(this.url)){self.global.addCSStoPage(styleData,$component)}else{$(window).trigger({type:"STYLE_READY",component:$component[0]})}}else{self.global.addCSStoPage(styleData,$component);self.cssToUUIDMap.set(this.url,dependOnId)}}finally{self.global.decreaseLoadCounter()}})).fail((function(){self.global.decreaseLoadCounter()}))}if(modelPromise&&templatePromise){$.when(modelPromise,templatePromise).done((function(aryModel,aryTemplate){try{var modelData=aryModel[0];var templateData=aryTemplate[0];modelData.guid=guid;modelData=self.global.updateModel(modelData,$component);templateData=templateData.replace(/{{SHARED_ROOT}}/g,self.global.sharedRoot);templateData=templateData.replace(/{{STATIC_ROOT}}/g,self.global.staticRoot);if(modelData["cssClassNames"]){$component.addClass(modelData["cssClassNames"])}if(!modelData.data){modelData["data"]={}}self.global.hb(templateData,modelData,$component);self.global.processModelData($component,modelData);var aryComponents=modelData["components"];if(aryComponents){aryComponents.forEach((function(c){self.global.processComponentData(c,$component)}))}self.global.initComponent($component);if(logicPromise){self.global.loadLogicJS(logicPromise,guid)}}finally{self.global.decreaseLoadCounter()}})).fail((function(){self.global.decreaseLoadCounter()}))}else if(modelPromise){$.when(modelPromise).done((function(aryModel){var modelData=aryModel;modelData.guid=guid;modelData=self.global.updateModel(modelData,$component);self.global.processModelData($component,modelData);if(modelData["cssClassNames"]){$component.addClass(modelData["cssClassNames"])}var aryComponents=modelData["components"];if(aryComponents){aryComponents.forEach((function(c){self.global.processComponentData(c,$component)}))}if(logicPromise){self.global.loadLogicJS(logicPromise,guid)}}))}else if(templatePromise){$.when(templatePromise).done((function(aryTemplate){try{var templateData=aryTemplate;templateData=templateData.replace(/{{SHARED_ROOT}}/g,self.global.sharedRoot);templateData=templateData.replace(/{{STATIC_ROOT}}/g,self.global.staticRoot);var modelData=$component.data("model");var updatedModelData;if(!modelData){modelData={}}modelData.guid=guid;modelData=self.global.updateModel(modelData,$component);if(modelData["cssClassNames"]){$component.addClass(modelData["cssClassNames"])}self.components=self.util.updateGlobalComponentVariable(self.components,guid,modelData,componentName);if(externalDataComponent&&externalDataPromise){externalDataPromise.then((function(data){if(modelData.searchType=="adobeTarget"){data=self.global.translateTargetData(data)}updatedModelData=$.extend({},modelData,data);self.global.initComponent($component);var pinSearch=true;self.components=self.util.updateGlobalComponentVariable(self.components,guid,updatedModelData,componentName);return externalDataPromise})).then((function(data){if(modelData.searchType!=="adobeTarget"){if(pinsToSearch.length>0){var pinHits=Array.from(data.hits.hit);pinHits.sort((function(a,b){return pinsToSearch.indexOf(a.id)-pinsToSearch.indexOf(b.id)}));updatedModelData.hits.hit=pinHits.concat(updatedModelData.hits.hit);self.global.initComponent($component);self.components=self.util.updateGlobalComponentVariable(self.components,guid,updatedModelData,componentName)}}self.global.hb(templateData,updatedModelData,$component);$component.trigger("CLOUD_QUERY_COMPLETE")})).catch((function(error){console.log("CLOUD_QUERY_FAILED");$(window).trigger("CLOUD_QUERY_FAILED",[$component]);console.log(error.message)}))}else{self.global.hb(templateData,modelData,$component);self.global.initComponent($component)}if(logicPromise){self.global.loadLogicJS(logicPromise,guid)}}finally{self.global.decreaseLoadCounter()}})).fail((function(){self.global.decreaseLoadCounter()}))}else if(logicPromise){self.global.loadLogicJS(logicPromise,guid)}}$component.attr("data-instance-id",guid);if(componentName){if(!self.components[componentName]){self.components[componentName]={}}if(self.components[componentName]){var curComponent=self.components[componentName];curComponent[guid]=self.global.generateNewComponent(guid);self.components[componentName]=curComponent}}}))},generateNewComponent:function(guid){return{guid:guid}},loadLogicJS:function(logicPromise,guid){$.when(logicPromise).done((function(aryLogic){try{var logicData=aryLogic;if(logicData){let dependOnId=false;if(!self.jsToUUIDMap.has(this.url)){dependOnId=logicData.indexOf("{{guid}}")>=0}logicData=logicData.replace(/{{guid}}/g,guid);logicData=logicData.replace(/{{SHARED_ROOT}}/g,self.global.sharedRoot);logicData=logicData.replace(/{{STATIC_ROOT}}/g,self.global.staticRoot);var cfg={scriptText:""+logicData};if(self.jsToUUIDMap.has(this.url)){if(self.jsToUUIDMap.get(this.url)){self.global.addJSToPage(cfg)}}else{self.global.addJSToPage(cfg);self.jsToUUIDMap.set(this.url,dependOnId)}}}finally{self.global.decreaseLoadCounter()}}))},addJSToPage:function(cfg){var script=document.createElement("script");var prior=document.getElementsByTagName("script")[0];prior.parentNode.insertBefore(script,prior);try{if(cfg.scriptText){script.innerHTML+=cfg.scriptText}else if(cfg.scriptUrl){script.src=cfg.scriptUrl}}catch(e){console.log("Error adding JS to page: "+e)}},translateTargetData:function(data){var hit=[];var targetResults=JSON.parse(data);$.each(targetResults.adobeRecommendations,(function(i){if(i=="recDetailedResults"){$.each(this,(function(key,value){var fields={title:value.name,sub_title:value.subTitle,published_date:value.publishedDate,path:value.pageUrl,thumbnail_image:value.thumbnailUrl};hit.push({fields:fields})}))}}));var hits={found:hit.length,start:0,hit:hit};data={hits:hits};return data},updateBackgroundImage:function($el){self.global.setPreferredOrder();var hasFound=false;self.preferredBreakpointOrder.forEach((function(breakpoint){if(!hasFound){if($el.data(breakpoint+"-bg-src")&&$el.data(breakpoint+"-bg-src").length){$el.css("background-image","url('"+$el.data(breakpoint+"-bg-src")+"')");hasFound=true}}}))},updateImageSrc:function($el){var hasFound=false;self.preferredBreakpointOrder.forEach((function(breakpoint){if(!hasFound){if($el.data(breakpoint+"-src")&&$el.data(breakpoint+"-src").length){if($el.hasClass("lazyload")){if($el.data("src")&&$el.data("src").length){$el.data("src",$el.data(breakpoint+"-src"))}if($el.attr("src")&&$el.attr("src").length){$el.attr("src",$el.data(breakpoint+"-src"))}}else{$el.attr("src",$el.attr("data-"+breakpoint+"-src"))}hasFound=true}}}))},updateMarginPadding:function($el){var hasFound=false;$el.css("margin","");$el.css("padding","");self.preferredBreakpointOrderPM.forEach((function(breakpoint){if(!hasFound){if($el.is("[data-"+breakpoint+"-margin]")&&$el.attr("data-"+breakpoint+"-margin").length){$el.css("margin",$el.data(breakpoint+"-margin")+"px");hasFound=true}}}));hasFound=false;self.preferredBreakpointOrderPM.forEach((function(breakpoint){if(!hasFound){if($el.is("[data-"+breakpoint+"-padding]")&&$el.attr("data-"+breakpoint+"-padding").length){$el.css("padding",$el.data(breakpoint+"-padding")+"px");hasFound=true}}}))},updateHeight:function($el){var hasFound=false,_currentBreakPoint;$el.css("height","");if(!hasFound){if(ResponsiveBootstrapToolkit.current()=="xs"||ResponsiveBootstrapToolkit.current()=="sm"){_currentBreakPoint="xs"}else{_currentBreakPoint="md"}if($el.is("[data-"+_currentBreakPoint+"-height]")&&$el.attr("data-"+_currentBreakPoint+"-height").length){$el.css("height",$el.data(_currentBreakPoint+"-height")+"px");hasFound=true}}},updateMinimumHeight:function($el){var _currentBreakPoint;$el.css("min-height","");if(ResponsiveBootstrapToolkit.current()=="xs"||ResponsiveBootstrapToolkit.current()=="sm"){_currentBreakPoint="xs"}else{_currentBreakPoint="md"}if($el.is("[data-"+_currentBreakPoint+"-min-height]")&&$el.attr("data-"+_currentBreakPoint+"-min-height").length){$el.css("min-height",$el.data(_currentBreakPoint+"-min-height"))}},setPreferredOrder:function(){var newBreakpoint=ResponsiveBootstrapToolkit.current();var preferredOrder=[];var preferredOrderPM=[];switch(newBreakpoint){case"sm":preferredOrder=["sm","xs","md","lg","xl"];preferredOrderPM=["sm","xs"];break;case"md":preferredOrder=["md","sm","xs","lg","xl"];preferredOrderPM=["md","lg","xl"];break;case"lg":preferredOrder=["lg","md","sm","xs","xl"];preferredOrderPM=["lg","md","xl"];break;case"xl":preferredOrder=["xl","lg","md","sm","xs"];preferredOrderPM=["xl","lg","md"];break;default:preferredOrder=["xs","sm","md","lg","xl"];preferredOrderPM=["xs","sm"]}self.preferredBreakpointOrder=preferredOrder;self.preferredBreakpointOrderPM=preferredOrderPM},breakpointChanged:function(newBreakpoint){self.global.setPreferredOrder();$("html").removeClass("xs sm md lg xl").addClass(newBreakpoint);$(".responsive-background-image").each((function(){self.global.updateBackgroundImage($(this))}));$("img.responsive-image").each((function(){self.global.updateImageSrc($(this))}));$(".custom-margin-padding").each((function(){self.global.updateMarginPadding($(this))}));$(".custom-height").each((function(){self.global.updateHeight($(this))}));$(".custom-min-height").each((function(){self.global.updateMinimumHeight($(this))}));self.breakpoinChanged=true;self.global.nextgenDomReady();$(window).trigger("BREAKPOINT_CHANGED")},initViewportListener:function(){var visibilityDivs={xs:$('<div class="d-xs-block d-sm-none d-md-none d-lg-none d-xl-none"></div>'),sm:$('<div class="d-none d-sm-block d-md-none d-lg-none d-xl-none"></div>'),md:$('<div class="d-none d-md-block d-sm-none d-lg-none d-xl-none"></div>'),lg:$('<div class="d-none d-lg-block d-sm-none d-md-none d-xl-none"></div>'),xl:$('<div class="d-none d-xl-block d-sm-none d-md-none d-lg-none"></div>')};ResponsiveBootstrapToolkit.use("custom",visibilityDivs);$(window).resize(ResponsiveBootstrapToolkit.changed((function(){self.global.breakpointChanged(ResponsiveBootstrapToolkit.current())}))).resize()},init:function(){window.lazySizesConfig=window.lazySizesConfig||{};lazySizesConfig.loadMode=0;self.global.initViewportListener();self.global.sharedRoot=self.global.getSharedRoot();self.global.staticRoot=self.global.getStaticRoot();var dpVersions=new Map;if(window["dpVersions_nextgen"]){dpVersions=new Map(Object.entries(window.dpVersions_nextgen))}var exparianceDpVersions="dpVersions_"+$("body").data("experience");if(window[exparianceDpVersions]){var experianceDpVersions=window[exparianceDpVersions];for(var property in experianceDpVersions){dpVersions.set(property,experianceDpVersions[property])}}window.dpVersions=dpVersions;var querystring=window.location.search;if(querystring){self.global.querystringObject=self.global.querystringToObject(querystring)}if(self.awsEndPoint&&self.awsSiteID){self.search.requireModule((function(){self.search.initSearch()}))}$(".tccc-cmp, .tccc-page").each((function(k,v){var $this=$(v);self.global.processComponent($this);$this.find(".custom-margin-padding").each((function(){self.global.updateMarginPadding($(this))}));$this.find(".custom-height").each((function(){self.global.updateHeight($(this))}));$(".custom-min-height").each((function(){self.global.updateMinimumHeight($(this))}))}));var htlPromises=[];$(".tccc-htl").each((function(k,v){var $this=$(v);var shouldRenderComponentPromise=self.global.getRenderComponentPromise($this);htlPromises.push(shouldRenderComponentPromise);$.when(shouldRenderComponentPromise).done((function(shouldRenderComponent){if(shouldRenderComponent){$this.find(".custom-margin-padding").each((function(){self.global.updateMarginPadding($(this))}));$this.find(".custom-height").each((function(){self.global.updateHeight($(this))}));$(".custom-min-height").each((function(){self.global.updateMinimumHeight($(this))}))}}))}));Promise.all(htlPromises).then((function(){self.global.initViewportListener()}))},getRenderComponentPromise:function($component){var shouldRenderComponentPromise=window.theme&&window.theme.dpCustomPreProcessing?window.theme.dpCustomPreProcessing($component):Promise.resolve(true);return shouldRenderComponentPromise}},search:{requireModule:function(cb){if(self.awsEndPoint&&self.awsSiteID){requirejs(["tccc-search"],(function(){cb()}))}}},util:{date:{isoStringToDate:function(s){var b=s.split(/\D/);return new Date(Date.UTC(b[0],--b[1],b[2],b[3]||0,b[4]||0,b[5]||0,b[6]||0))},formatDate:function(s,cb){requirejs(["dateUtil","dayjs"],(function(){newdate=tccc.util.date.dateUtil(s,(function(newdate){cb(newdate)}))}))}},findComponentNameByGuid:function(guid){var componentName;if(guid){componentName=$(".tccc-cmp[data-instance-id='"+guid+"']").data("component-name")}return componentName},getComponent:function(components,guid,componentName){var component=null;if(!componentName||!components[componentName]){componentName=self.util.findComponentNameByGuid(guid)}if(guid&&componentName){component=components[componentName][guid]}return component},updateGlobalComponentVariable:function(components,guid,modelData,componentName){if(!componentName){componentName=self.util.findComponentNameByGuid(guid)}if(guid&&componentName){$.extend(true,components[componentName][guid],modelData)}return components},regexEscape:function(string){return string.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},replaceG:function(original,searchTxt,replaceTxt){searchTxt=self.util.regexEscape(searchTxt);const regex=new RegExp(searchTxt,"g");return original.replace(regex,replaceTxt)},getFriendlyName:function(str){str=self.util.replaceG(str,"_"," ");str=self.util.replaceG(str,"-"," ");return str},processExternalData:function(params,processType,$component,updateQuery,pinSearch){requirejs(["smartlistHandler","AWS"],(function(){tccc.global.smartlistHandler.processExternalDataQuery(params,processType,$component,updateQuery,pinSearch).then((function(data){self.global.processComponent($component)})).catch((function(err){console.log(err)}))}))},debounceMethod:function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args)}},getProp:function(object,keys,defaultVal){if(!keys)return undefined;var keysArray=Array.isArray(keys)?keys:keys.match(/([^[.\]])+/g);return keysArray.reduce((function(prevObject,key){return prevObject&&prevObject[key]}),object)||defaultVal},scrollTowardsAnchor:function(anchor){var anchorHash=anchor.split("?");if(anchorHash[0].charAt(0)==="#"){var anchorEl=document.querySelector('[data-component-id="'+anchorHash[0].substr(1)+'"]');if(anchorEl!=null){anchorEl.scrollIntoView({behavior:"smooth"})}}},addListenersToAnchors:function(){$(window).on("TEMPLATE_RENDERED",(function(event,$container){$container.find("a").each((function(){let aHref=$(this).attr("href");if(aHref){if(aHref.charAt(0)=="#"){$(this).on("click",(function(){self.util.scrollTowardsAnchor(aHref)}))}}}))}))}},cdsHandler:{cds_ready:0,initialize:function(){switch(self.cdsHandler.cds_ready){case 1:return"inprogress";case 2:return"success";case 3:"failed";default:self.cdsHandler.cds_ready=1;requirejs(["cdsHandler"],(function(){self.cdsHandler.initSDK()}))}}},b2cHandler:{b2c_ready:0,initialize:function(callbacks){if(self.isAuthorMode!==true){switch(self.b2cHandler.b2c_ready){case 1:return"inprogress";case 2:return"success";case 3:"failed";default:self.b2cHandler.b2c_ready=1;requirejs(["b2cHandler"],(function(){console.log("Library Loaded");self.b2cHandler.initSDK(callbacks)}))}}}}};$(document).on("UPDATE_QUERY",updateFilterHandler);function updateFilterHandler(e){var updatedParams;if(Object.keys(e.selectedTag).length!=0){updatedParams=Object.assign(e.datamodel,e.selectedTag);updateQuery=true;self.util.processExternalData(updatedParams,e.processType,e.component,updateQuery)}}window.onpopstate=function(e){if(e.state){var search=e.state;tccc.search.instances["global"]=search;$(window).trigger("SEARCH_QUERY_PARAM_UPDATED",["global",true])}};self.global.init();self.app_ready=true;window.tccc=self;if(typeof sitePWAManifest!=="undefined"){requirejs(["pwaHandler"],(function(){tccc.pwaHandler.init()}))}var $dataLayerDisabled=self.global.getDataLayer();if(typeof window.dataLayer!=="undefined"&&(typeof $dataLayerDisabled==="undefined"||$dataLayerDisabled===false)){requirejs(["dataLayerHandler"],(function(){$(document).ready((function(){dataLayerHandler.init();console.log("Custom DataLayer Enabled");$(window).trigger("ANALYTICS_READY")}))}))}else{console.log("Custom DataLayer Disabled")}window.addEventListener("hashchange",self.util.scrollTowardsAnchor(window.location.hash),false);self.util.addListenersToAnchors();if(!self.isAuthorMode){if(typeof identityPoolConfig!=="undefined"&&typeof awsPinpointCofig!=="undefined"&&typeof firebaseConfig!=="undefined"){requirejs(["pushNotificationHandler"],(function(){tccc.pushNotificationHandler.init()}))}}if($(".ngecom").length>0){requirejs(["econMain"],(function(econMain){ngecom.setup()}))}$(window).trigger("APP_READY")}));